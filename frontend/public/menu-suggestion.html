<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usulan Menu - Infinity Cafe</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body data-page="menu-suggestion">
  <!-- Header -->
  <nav class="header">
    <div class="header-brand">
      <h1 class="header-title" id="navbar-title">Usulan Menu</h1>
      <p class="header-subtitle">Stephany | Barista</p>
    </div>
    <div class="header-menu">
      <button class="nav-btn" id="nav-dashboard" onclick="window.location.href = '/dashboard';">Dashboard</button>
      <button class="nav-btn" id="nav-menu" onclick="window.location.href = '/menu-management';">Menu Management</button>
      <button class="nav-btn active" id="nav-suggestion" onclick="window.location.href = '/menu-suggestion';">Usulan Menu</button>
      <button class="nav-btn" id="nav-stok" onclick="window.location.href = '/stock-management';">Stock Management</button>
    </div>
         <div class="header-right">
       <!-- Search moved to table area -->
     </div>
  </nav>

  <!-- Main Content -->
  <div class="main-container">
    <div class="content-area">
      <!-- Greeting Message -->
      <div class="greeting-message">
        <h2>Usulan Menu dari Pelanggan</h2>
        <p class="greeting-date">Kelola dan lihat usulan menu dari pelanggan setia kami</p>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button class="btn btn-primary" onclick="openSuggestionModal()">
          <i class="fas fa-plus"></i> Tambah Usulan Baru
        </button>
        <button class="btn btn-secondary" onclick="refreshSuggestions()">
          <i class="fas fa-sync-alt"></i> Refresh
        </button>
      </div>

      <!-- Statistics Cards -->
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-lightbulb"></i>
          </div>
          <div class="stat-content">
            <h3 id="total-suggestions">0</h3>
            <p>Total Usulan</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-calendar-day"></i>
          </div>
          <div class="stat-content">
            <h3 id="today-suggestions">0</h3>
            <p>Usulan Hari Ini</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-star"></i>
          </div>
          <div class="stat-content">
            <h3 id="popular-suggestions">0</h3>
            <p>Usulan Populer</p>
          </div>
        </div>
      </div>

             <!-- Suggestions List -->
       <div class="suggestions-container">
         <div class="table-container">
           <!-- Table Header with Search and Filter -->
           <div class="table-header">
             <div class="table-title">
               <h3>Daftar Usulan Menu</h3>
             </div>
             <div class="table-controls">
               <div class="search-container">
                 <i class="fa-solid fa-magnifying-glass search-icon"></i>
                 <input type="text" placeholder="Search usulan menu..." class="search-input" id="search-suggestions">
               </div>
               <div class="filter-controls">
                 <select id="sort-filter" class="form-select">
                   <option value="newest">Terbaru</option>
                   <option value="oldest">Terlama</option>
                   <option value="popular">Terpopuler</option>
                 </select>
               </div>
             </div>
           </div>
           
           <table id="suggestions-table">
             <thead>
               <tr>
                 <th>No</th>
                 <th>Nama Menu</th>
                 <th>Customer</th>
                 <th>Tanggal</th>
                 <th class="action-header">Aksi</th>
               </tr>
             </thead>
             <tbody id="suggestions-tbody">
               <!-- Suggestions will be loaded here -->
             </tbody>
           </table>
              
              <div id="loading-suggestions" class="loading-spinner hidden">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Memuat usulan menu...</p>
              </div>
              
              <div id="no-suggestions" class="no-data hidden">
                <i class="fas fa-inbox"></i>
                <h3>Belum ada usulan menu</h3>
                <p>Jadilah yang pertama memberikan usulan menu untuk Infinity Cafe!</p>
              </div>
              
              <!-- Pagination -->
              <div class="pagination-container" id="pagination-container">
                <div class="pagination-info">
                  <span id="pagination-info">Menampilkan 0 dari 0 usulan</span>
                </div>
                <div class="pagination-controls">
                  <button class="pagination-btn" id="prev-page" onclick="changePage(-1)" disabled>
                    <i class="fas fa-chevron-left"></i>
                  </button>
                  <div class="page-numbers" id="page-numbers">
                    <!-- Page numbers will be generated here -->
                  </div>
                  <button class="pagination-btn" id="next-page" onclick="changePage(1)" disabled>
                    <i class="fas fa-chevron-right"></i>
                  </button>
                </div>
                <div class="pagination-size">
                  <span>Tampilkan:</span>
                  <select id="page-size" onchange="changePageSize()">
                    <option value="10">10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                  </select>
                  <span>per halaman</span>
                </div>
              </div>
            </div>
        

      </div>
    </div>
  </div>

  <!-- Add Suggestion Modal -->
  <div id="suggestion-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Tambah Usulan Menu Baru</h3>
        <button class="modal-close" onclick="closeSuggestionModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="suggestion-form">
          <div class="form-group">
            <label for="menu-name">Nama Menu *</label>
            <input type="text" id="menu-name" name="menu_name" class="form-input" 
                   placeholder="Contoh: Kopi Gula Aren, Croissant Coklat" required>
            <small class="form-help">Berikan nama menu yang jelas dan menarik</small>
          </div>
          <div class="form-group">
            <label for="customer-name">Nama Anda *</label>
            <input type="text" id="customer-name" name="customer_name" class="form-input" 
                   placeholder="Masukkan nama Anda" required>
            <small class="form-help">Nama Anda akan dicatat sebagai pemberi usulan</small>
          </div>
          <div class="form-group">
            <label for="menu-description">Deskripsi (Opsional)</label>
            <textarea id="menu-description" name="description" class="form-textarea" 
                      placeholder="Jelaskan lebih detail tentang menu yang Anda usulkan..."></textarea>
            <small class="form-help">Tambahkan detail seperti bahan, cara penyajian, atau alasan mengapa menu ini menarik</small>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeSuggestionModal()">Batal</button>
        <button class="btn btn-primary" onclick="submitSuggestion()">
          <i class="fas fa-paper-plane"></i> Kirim Usulan
        </button>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div id="success-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-body text-center">
        <div class="success-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h3>Usulan Berhasil Dikirim!</h3>
        <p id="success-message">Terima kasih atas usulan menu Anda. Tim kami akan mempertimbangkan usulan ini.</p>
        <button class="btn btn-primary" onclick="closeSuccessModal()">Tutup</button>
      </div>
    </div>
  </div>

  <!-- Error Modal -->
  <div id="error-modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-body text-center">
        <div class="error-icon">
          <i class="fas fa-exclamation-circle"></i>
        </div>
        <h3>Oops! Terjadi Kesalahan</h3>
        <p id="error-message">Gagal mengirim usulan menu. Silakan coba lagi.</p>
        <button class="btn btn-secondary" onclick="closeErrorModal()">Tutup</button>
      </div>
    </div>
  </div>

  <!-- View Suggestion Detail Modal -->
  <div id="view-suggestion-modal" class="modal hidden">
    <div class="modal-content view-modal">
      <button class="modal-close" onclick="closeViewSuggestionModal()">
        &times;
      </button>
      <h3 class="modal-title">Detail Usulan Menu</h3>
      <div class="view-content">
        <div class="view-item">
          <label>Nama Menu</label>
          <span id="view-menu-name">-</span>
        </div>
        <div class="view-item">
          <label>Customer</label>
          <span id="view-customer-name">-</span>
        </div>
        <div class="view-item">
          <label>Tanggal</label>
          <span id="view-timestamp">-</span>
        </div>
        <div class="view-item">
          <label>ID Usulan</label>
          <span id="view-usulan-id">-</span>
        </div>
        <div class="view-item">
          <label>Deskripsi</label>
          <span id="view-description" class="flavor-display"></span>
        </div>
      </div>
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeViewSuggestionModal()">Tutup</button>
        <button class="modal-btn" onclick="approveSuggestionFromView()">Setujui</button>
      </div>
    </div>
  </div>

  <script src="js/menu-suggestion.js"></script>
</body>
</html>


